var hero_type="",build="",gold="",active="",splash="";function adjustWeights(a){switch(gtag("event","Dark Mode",{event_category:"Dark Mode",event_action:"Setting",event_label:$("#dark").prop("checked")?"Dark":"Light"}),$("#build").val()&&gtag("event","Build",{event_category:"Build",event_action:"Value",event_label:$("#build").val()}),$("#hero").val()&&gtag("event","Hero",{event_category:"Hero",event_action:"Set",event_label:$("#hero").val()}),$("#gold").val()&&gtag("event","Gold",{event_category:"Gold",event_action:"Set",event_label:$("#gold").val()}),$("#active").val()&&gtag("event","Active",{event_category:"Active",event_action:"Set",event_label:$("#active").val()}),build=$("#build").val(),active="online"==$("#active").val(),splash=1==$("#wet").prop("checked"),gold=$("#gold").val(),$("#hero").val()){case"maya":case"kronus":case"kiki":case"beany":case"ursa":case"wally":case"pharaoh":case"cass":case"lucy":case"jazz":case"mina":hero_type="spell_ground";break;case"zato":case"sophia":case"lance":case"gulbrand":case"rhys":case"cosette":case"jayce":case"boomoh":case"aya":case"yzafa":hero_type="melee_ground";break;case"pingo":case"rosabella":case"davey":case"maddie":case"sawyer":case"saje":case"dex":case"lala":case"miki":case"finn":hero_type="ranged_ground";break;case"maple":case"nohni":hero_type="melee_flying";break;case"kin":case"zolom":hero_type="ranged_flying";break;case"titania":case"damon":hero_type="spell_flying"}$.each(artifacts.data,function(a,e){var t=calculateWeight(a,e.expo);artifacts.data[a].rating=0==t.rating&&0<artifacts.data.twd.level&&0==e.level?.25:t.rating,artifacts.data[a].color=t.color}),adjustBoS(),1==a&&(artifacts=calculateAll(artifacts,!0)),$.each(skills.data,function(a,e){var t=calculateWeight(a,e.expos.b1);skills.data[a].rating1=t.rating,skills.data[a].color=t.color,-1!=e.type2&&(t=calculateWeight(a,e.expos.b2),skills.data[a].rating2=t.rating,skills.data[a].color=determineColorWinner(skills.data[a].color,t.color)),-1!=e.type3&&(t=calculateWeight(a,e.expos.b3),skills.data[a].rating3=t.rating,skills.data[a].color=determineColorWinner(skills.data[a].color,t.color))}),calculateAllSkills(),storeData()}function determineColorWinner(a,e){return"info"==e||"info"==a?"info":"success"==e&&"info"!=a?e:"warning"==e&&"info"!=a&&"success"!=a?e:"secondary"==e&&"danger"==a?e:a}function calculateWeight(a,e){var t={rating:0,color:"danger"};if("bos"==a)t.color="info";else if(null!=e.sum)switch(e.sum){case"pet_dmg":t.rating+=pets_dmg.all,t.rating+=pets_dmg.tap*reducts.tap[build],t.rating+=pets_dmg.hero*reducts.hero[build],t.rating+=pets_dmg.splash*reducts.splash[build]*(1==splash?1:0),t.color="info";break;case"fundamental":t.rating=reducts.tap[build]+reducts.hero[build],t.color=determineColor(t.rating,!0);break;case"sword_melee":t.rating=reducts.sword[build],-1!=hero_type.indexOf("melee")&&(t.rating+=reducts.hero[build]),t.color=determineColor(t.rating,!0);break;case"helmet_flying":t.rating=reducts.helmet[build],-1!=hero_type.indexOf("flying")&&(t.rating+=reducts.hero[build]),t.color=determineColor(t.rating,!0);break;case"gold_ground":t.rating=reducts.gold,-1!=hero_type.indexOf("ground")&&(t.rating+=reducts.hero[build]),t.color=determineColor(t.rating,!0);break;case"dmg_spell":t.rating=1,-1!=hero_type.indexOf("spell")&&(t.rating+=reducts.hero[build]),t.color=determineColor(t.rating,!0);break;case"companion_ranged":t.rating=reducts.companion[build],-1!=hero_type.indexOf("ranged")&&(t.rating+=reducts.hero[build]),t.color=determineColor(t.rating,!0);break;case"pet_gold":t.rating+=pets_gold*reducts.gold,t.color="warning";break;case"pet_skill_phom":t.rating*=3*reducts.pet[build],"phom"!=gold&&"all"!=gold||(t.rating=t.rating<reducts.gold?reducts.gold:t.rating),t.color=determineColor(t.rating,!0);break;case"tree_red":t.rating+=reducts.tap[build],t.rating+=reducts.pet[build],t.rating+=reducts.fs[build],t.color=determineColor(t.rating,!0);break;case"tree_yellow":t.rating+=reducts.hero[build],t.rating+=reducts.cs[build],t.rating+=reducts.wc[build],t.color=determineColor(t.rating,!0);break;case"tree_blue":t.rating+=reducts.hs[build],t.rating+=reducts.gold*("phom"==gold?.5:"fairy"==gold?.6:1),t.rating+=reducts.sc[build],t.color=determineColor(t.rating,!0);break;case"tree_green":0==active&&(t.rating+=reducts.gold,t.rating+=1),t.rating+=reducts.ds[build],t.color=determineColor(t.rating,!0);break;case"skill":t.rating+=reducts.hs[build],t.rating+=reducts.ds[build],t.rating+=reducts.gold*("phom"==gold?.5:"fairy"==gold?.6:1),t.rating+=reducts.fs[build],t.rating+=reducts.wc[build],t.rating+=reducts.sc[build],t.color="info";break;case"skill_dmg":t.rating+=0<reducts.hs[build]?reducts.hs[build]:0,t.rating+=0<reducts.ds[build]?reducts.ds[build]:0<artifacts.data.gok.level?1:0,t.rating+=0<reducts.fs[build]?reducts.fs[build]:0<artifacts.data.os.level?1:0,t.rating+=0<reducts.wc[build]?reducts.wc[build]:0<artifacts.data.tac.level?1:0,t.rating+=0<reducts.sc[build]?reducts.sc[build]:0<artifacts.data.ho.level?1:0,t.rating+=1,t.rating=Math.min(4,t.rating),t.color="info";break;case"artifacts":t.rating+=countArtifacts(artifacts.data),t.color="info";break;case"skill_tap":t.rating+=reducts.hs[build],t.rating+=reducts.ds[build],t.rating+=reducts.gold*("phom"==gold?.5:"fairy"==gold?.6:1),t.rating+=reducts.fs[build],t.rating+=reducts.wc[build],t.rating+=reducts.sc[build],t.rating*=reducts.tap[build]*("hs"==build?0:1),t.rating*=skills.data.ms.levels[Math.min(skills.data.ms.level+1,skills.data.ms.max)].bonus3,t.color=determineColor(t.rating,!0);break;case"skill_fairy":t.rating+=reducts.hs[build],t.rating+=reducts.ds[build],t.rating+=reducts.gold*("phom"==gold?.5:"fairy"==gold?.6:1),t.rating+=reducts.fs[build],t.rating+=reducts.wc[build],t.rating+=reducts.sc[build],t.rating*=skills.data.fc.levels[Math.min(skills.data.fc.level+1,skills.data.fc.max)].bonus,t.rating<reducts.gold&&(t.rating="fairy"==gold?reducts.gold:t.rating,t.rating="all"==gold?reducts.gold:t.rating),t.color=determineColor(t.rating,!1);break;case"skill_mana":t.rating+=reducts.hs[build],t.rating+=reducts.ds[build],t.rating+=reducts.gold*("phom"==gold?.5:"fairy"==gold?.6:1),t.rating+=reducts.fs[build],t.rating+=reducts.wc[build],t.rating+=reducts.sc[build],t.rating*=.5*(artifacts.data.op.current_effect+skills.data.mm.levels[Math.min(skills.data.mm.level+1,skills.data.mm.max)].bonus3),t.color=determineColor(t.rating,!1);break;case"skill_gold":t.rating+=0<reducts.hs[build]?reducts.gold:0<artifacts.data.ip.level?reducts.gold:0,t.rating+=0<reducts.ds[build]?reducts.gold:0<artifacts.data.gok.level?reducts.gold:0,t.rating+=0<reducts.fs[build]?reducts.gold:0<artifacts.data.os.level?reducts.gold:0,t.rating+=0<reducts.wc[build]?reducts.gold:0<artifacts.data.tac.level?reducts.gold:0,t.rating+=0<reducts.sc[build]?reducts.gold:0<artifacts.data.ho.level?reducts.gold:0,t.rating=3*reducts.gold<t.rating?3*reducts.gold:t.rating,t.rating+=reducts.gold,t.color="warning";break;case"equip":t.rating+=reducts.sword[build],t.rating+=reducts.helmet[build],t.rating+=reducts.gold,t.rating+=1,t.rating+=reducts.companion[build],t.color="info";break;case"ash":if("cs"!=build)t.rating=1;else{var r=20,l=30;l+=artifacts.data.a.effect*artifacts.data.a.level;var i=(l*=0<skills.data.ds.level?1+skills.data.ds.levels[skills.data.ds.level].bonus2:1)/(30+(r+=0<skills.data.coo.level?skills.data.coo.levels[skills.data.coo.level].bonus2:0)),s=l/4.5,d=1/240*(0<skills.data.aas.level?skills.data.aas.levels[skills.data.aas.level].bonus:1)*6*(0<skills.data.as.level?skills.data.as.levels[skills.data.as.level].bonus2:1);t.rating=Math.min(1,i/s+d)}t.color=determineColor(t.rating,!1)}else if(null!=e.flat)switch(e.flat){case"gold":t.rating=reducts.gold,t.color="warning";break;case"hom":t.rating=reducts.gold*("phom"==gold?.5:"fairy"==gold?.6:1),t.color="warning";break;case"gold_spawn":t.rating=reducts.gold;var c=.01;c+=0<skills.data.ab.level?skills.data.ab.levels[skills.data.ab.level].bonus2:skills.data.ab.levels[1].bonus2,c+=0<artifacts.data.eotk.level?artifacts.data.eotk.effect*artifacts.data.eotk.level:1*artifacts.data.eotk.effect,c+=new Decimal((""==$("#multispawn").val()?0:$("#multispawn").val())+"."+(""==$("#multispawn_decimal").val()?0:$("#multispawn_decimal").val())).toNumber()/100;var o=new Decimal((""==$("#all_prob").val()?0:$("#all_prob").val())+"."+(""==$("#all_prob_decimal").val()?0:$("#all_prob_decimal").val()));c*=0!=(o=o.toNumber()/100)?o:1,c*=1+artifacts.data.lfoa.effect*artifacts.data.lfoa.level,t.rating*=c,t.color="warning";break;case"none":t.rating=0,t.color="danger";break;case"inactive_phom":0==active?(t.rating=1,t.color="success"):(t.rating=reducts.gold*("phom"==gold||"all"==gold?1:0),t.color="warning");break;case"dmg":t.rating=1,t.color="info";break;case"hsk":0<artifacts.data.hs2.level?(t.rating=1,t.color="info"):(t.rating=.5,t.color="secondary");break;case"active":1==active?(t.rating=1,t.color="info"):(t.rating=0,t.color="danger");break;case"inactive_all":t.rating=0==active?1:0,t.rating+=1,t.color="info";break;case"inactive":0==active?(t.rating=1,t.color="success"):(t.rating=0,t.color="danger");break;case"inactive_pet":0==active&&(t.rating=reducts.pet[build],t.color=determineColor(t.rating,!0));break;case"inactive_ship":0==active&&(t.rating=reducts.cs[build],t.color=determineColor(t.rating,!0));break;case"inactive_clone":0==active&&(t.rating=reducts.sc[build],t.color=determineColor(t.rating,!0))}else null!=e.reduct?("splash"==e.reduct&&0==splash?t.rating=0:t.rating=reducts[e.reduct][build],t.color=determineColor(t.rating,!0),"warning"==t.color&&"ss"==a&&(t.color="secondary")):null!=e.hero_type?(-1==hero_type.indexOf(e.hero_type)?t.rating=0:t.rating=reducts.hero[build],t.color=determineColor(t.rating,!0)):null!=e.gold&&($.each(e.gold,function(a,e){if(gold==e)return t.rating=reducts.gold,!1;if("partial_inactive"==e){if(!active)return t.rating=.5*reducts.gold,!1}else if("inactive"==e){if(!active)return t.rating=reducts.gold,!1}else{if("inactive_all"==e)return active||(t.rating=reducts.gold),t.rating+=reducts.gold,!1;if("active"==e&&active)return t.rating=reducts.gold,!1}}),t.color=determineColor(t.rating,!0));return t}function determineColor(a,e){return reducts.gold==a?"warning":1==a?"success":1<a&&0==e?"info":1<a&&1==e?"success":0==a?"danger":"secondary"}